jQuery(document).ready(function(e){"use strict";function t(t){window.top.postMessage({slug:"useyourdrive",action:"wpcp-shortcode",shortcode:t},window.location.origin);var n=e("#wpcp-form").data("callback");""!==n&&window.parent[n](t)}function n(n){var a=e(".UseyourDrive.files").attr("data-token"),d=e(".UseyourDrive[data-token='"+a+"']").attr("data-path"),r=i(".UseyourDrive[data-token='"+a+"'] input[name='selected-files[]']"),o=e(".UseyourDrive.files").attr("data-account-id");return 0===r.length&&t(""),e.ajax({type:"POST",url:UseyourDrive_vars.ajax_url,data:{action:"useyourdrive-embedded",account_id:o,listtoken:a,lastpath:d,entries:r,editable:"preview"!==n,_ajax_nonce:UseyourDrive_vars.createlink_nonce},beforeSend:function(){e(".UseyourDrive .loading").height(e(".UseyourDrive .ajax-filelist").height()),e(".UseyourDrive .loading").fadeTo(400,.8),e(".UseyourDrive .wpcp-dropdown-menu-button").attr("disabled","disabled")},complete:function(){e(".UseyourDrive .loading").fadeOut(400),e(".UseyourDrive .wpcp-dropdown-menu-button").removeAttr("disabled")},success:function(i){if(null!==i&&null!==i.links&&i.links.length>0){var a="";e.each(i.links,function(e,t){"iframe"===t.type?("editable"===n?t.embeddedlink+="&rm=minimal&embedded=true":"editable-full"===n&&(t.embeddedlink+="&rm=embedded&embedded=true"),a+='<iframe src="'+t.embeddedlink+'" height="480" style="width:100%;border:none;overflow: hidden;" lass="uyd-embedded" allowfullscreen loading="lazy"></iframe>'):"image"===t.type&&(a+='<img src="'+t.embeddedlink+'" loading="lazy">')}),t(a)}},dataType:"json"}),!1}function i(t){var n=e(t+":checked").map(function(){return this.value}).get();return n}e(".wpcp-dropdown-menu-content a").on("click",function(t){t.stopPropagation(),n(e(this).data("type"))})});