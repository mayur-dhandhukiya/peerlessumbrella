(function(e){function t(t){r=t,o=r.find("[data-user-id]").attr("data-user-id"),e("#wpcp-modal-selector").fadeIn()}function a(){e("#wpcp-modal-selector").fadeOut()}function n(t){if(t.origin!==window.parent.location.origin)return;if("object"!=typeof t.data||null===t.data||void 0===t.data.action)return;if("wpcp-select-entries"!==t.data.action)return;if("useyourdrive"!==t.data.slug)return;const n=t.data.entries[0];e.ajax({type:"POST",url:UseyourDrive_vars.ajax_url,data:{action:"useyourdrive-linkusertofolder",account_id:n.account_id,id:n.entry_id,text:n.entry_name,userid:o,_ajax_nonce:UseyourDrive_vars.createlink_nonce},beforeSend:function(){r.find(".select_folder").addClass("!hidden"),a()},complete:function(){},success:function(e){void 0!==e.path?(r.parent().find(".column-personal_folder").html("<strong>"+e.path+"</strong>"),r.find(".deselect_folder").removeClass("!hidden")):location.reload()},dataType:"json"})}var r=null,o=null;e("#wpcp .select_folder").on("click",function(a){t(e(this).parent())}),window.addEventListener("message",n),e("#wpcp .deselect_folder").on("click",function(t){var a=e(this),n=e(this).parents("[data-user-id]").attr("data-user-id"),r=e(this).parents("[data-folder-key]").attr("data-folder-key");e.ajax({type:"POST",url:UseyourDrive_vars.ajax_url,data:{action:"useyourdrive-unlinkusertofolder",userid:n,personal_folder_key:r,_ajax_nonce:UseyourDrive_vars.createlink_nonce},beforeSend:function(){a.addClass("!hidden")},success:function(e){"1"===e?a.parents("[data-folder-key]").remove():location.reload()},complete:function(e){},dataType:"text"})})})(jQuery);