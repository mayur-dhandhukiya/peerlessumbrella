(function(e){function o(a){a.origin===window.parent.location.origin&&"object"==typeof a.data&&null!==a.data&&void 0!==a.data.action&&void 0!==a.data.shortcode&&"wpcp-shortcode"===a.data.action&&"useyourdrive"===a.data.slug&&(e(".wpcp-data-input").val(a.data.shortcode).trigger("change"),window.modal_action.close(),e("#wpcp-modal-action.UseyourDrive").remove(),window.removeEventListener("message",o))}function a(a){e("#wpcp-modal-action.UseyourDrive").length>0&&(void 0!==window.modal_action&&window.modal_action.close(),e("#wpcp-modal-action.UseyourDrive").remove());let d=e('<div class="wpcp-modal-header" tabindex="0">                          \n                    <a tabindex="0" class="close-button"  onclick="window.modal_action.close();"><i class="eva eva-close eva-lg" aria-hidden="true"></i></a>\n                </div>'),i=e('<div class="wpcp-modal-body" tabindex="0" style="display:none"></div>'),t=e('<div class="wpcp-modal-footer" style="display:none"><div class="wpcp-modal-buttons"></div></div>'),n=e('<div id="wpcp-modal-action" class="UseyourDrive wpcp wpcp-modal wpcp-modal95 wpcp-modal-minimal light"><div class="modal-dialog"><div class="modal-content"><div class="loading"><div class="loader-beat"></div></div></div></div></div>');e("body").append(n);var l=a.val(),c=l.replace("</p>","").replace("<p>",""),s="shortcode="+WPCP_shortcodeEncode(c),p=e("<iframe src='"+UseyourDrive_vars.ajax_url+"?action=useyourdrive-getpopup&type=modules&callback=uses_listener&"+s+"' width='100%' tabindex='-1' style='border:none' title=''></iframe>"),r=p.appendTo(i);e("#wpcp-modal-action.UseyourDrive .modal-content").append(d,i,t),r.on("load",function(){e(".wpcp-modal-body").fadeIn(),e(".wpcp-modal-footer").fadeIn(),e(".modal-content .loading:first").fadeOut()});let v=new RModal(document.getElementById("wpcp-modal-action"),{bodyClass:"rmodal-open",dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:!0,afterClose(){e(".wpcp-data-input").removeClass("wpcp-data-input"),window.removeEventListener("message",o),e("#wpcp-modal-action.UseyourDrive").remove()}});document.addEventListener("keydown",function(e){v.keydown(e)},!1),v.open(),window.modal_action=v}e(".vc_edit_form_elements .edit_useyourdrive_shortcode").click(function(d){d.preventDefault();let i=e(this).parents("form").find(".textarea");i.addClass("wpcp-data-input"),window.addEventListener("message",o),a(i)}),e(".vc_edit_form_elements .edit_useyourdrive_shortcode").trigger("click")})(jQuery);